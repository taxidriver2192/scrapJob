{
  "entities": [
    {
      "name": "companies",
      "attributes": [
        {
          "name": "company_id",
          "type": "INT",
          "primary": true,
          "autoIncrement": true
        },
        {
          "name": "name",
          "type": "VARCHAR(255)",
          "primary": false
        }
      ]
    },
    {
      "name": "job_postings",
      "attributes": [
        {
          "name": "job_id",
          "type": "INT",
          "primary": true,
          "autoIncrement": true
        },
        {
          "name": "linkedin_job_id",
          "type": "BIGINT",
          "primary": false,
          "unique": true
        },
        {
          "name": "title",
          "type": "VARCHAR(255)",
          "primary": false
        },
        {
          "name": "company_id",
          "type": "INT",
          "primary": false,
          "foreignKey": "companies.company_id"
        },
        {
          "name": "location",
          "type": "VARCHAR(255)",
          "primary": false
        },
        {
          "name": "description",
          "type": "TEXT",
          "primary": false
        },
        {
          "name": "apply_url",
          "type": "VARCHAR(2048)",
          "primary": false
        },
        {
          "name": "posted_date",
          "type": "DATE",
          "primary": false
        }
      ]
    },
    {
      "name": "job_queue",
      "attributes": [
        {
          "name": "queue_id",
          "type": "INT",
          "primary": true,
          "autoIncrement": true
        },
        {
          "name": "job_id",
          "type": "INT",
          "primary": false,
          "unique": true,
          "foreignKey": "job_postings.job_id"
        },
        {
          "name": "queued_at",
          "type": "DATETIME",
          "primary": false
        },
        {
          "name": "status_code",
          "type": "TINYINT",
          "primary": false,
          "comment": "1=pending,2=in_progress,3=done,4=error"
        }
      ]
    },
    {
      "name": "job_ratings",
      "attributes": [
        {
          "name": "rating_id",
          "type": "INT",
          "primary": true,
          "autoIncrement": true
        },
        {
          "name": "job_id",
          "type": "INT",
          "primary": false,
          "foreignKey": "job_postings.job_id"
        },
        {
          "name": "score",
          "type": "INT",
          "primary": false
        },
        {
          "name": "criteria",
          "type": "JSON",
          "primary": false
        },
        {
          "name": "rated_at",
          "type": "DATETIME",
          "primary": false
        }
      ]
    }
  ],
  "relationships": [
    {
      "from": "job_postings.company_id",
      "to": "companies.company_id",
      "type": "many-to-one"
    },
    {
      "from": "job_queue.job_id",
      "to": "job_postings.job_id",
      "type": "one-to-one"
    },
    {
      "from": "job_ratings.job_id",
      "to": "job_postings.job_id",
      "type": "many-to-one"
    }
  ]
}